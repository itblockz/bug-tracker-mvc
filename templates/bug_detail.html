<!DOCTYPE html>
<html>

<head>
    <title>{{ bug.title }}</title>
</head>

<body>
    <h1>{{ bug.title }}</h1>
    <p><a href="/">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a></p>

    <!-- ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ö‡∏±‡πä‡∏Å -->
    <table border="1">
        <tr>
            <th>‡∏£‡∏´‡∏±‡∏™</th>
            <td>{{ bug.id }}</td>
        </tr>
        <tr>
            <th>‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤</th>
            <td>{{ bug.source }}</td>
        </tr>
        <tr>
            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á</th>
            <td>{{ bug.created_date.strftime('%Y-%m-%d') }}</td>
        </tr>
        <tr>
            <th>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</th>
            <td>{{ bug.severity_score }}</td>
        </tr>
        <tr>
            <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
            <td>{{ bug.status }}</td>
        </tr>
    </table>

    <hr>

    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ö‡∏±‡πä‡∏Å (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö user ‡∏ó‡∏µ‡πà login ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà developer) -->
    {% if session.user_id and session.user_role != 'developer' %}
    {% if bug.verified %}
    <p>üîí ‡∏ö‡∏±‡πä‡∏Å‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ</p>
    {% elif already_reported %}
    <p>‚úÖ ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ö‡∏±‡πä‡∏Å‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß</p>
    {% else %}
    <h2>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ö‡∏±‡πä‡∏Å‡∏ô‡∏µ‡πâ</h2>
    <form method="POST" action="/bug/{{ bug.id }}/report">
        <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô:</label>
        <select name="report_type" required>
            <option value="UI Bug">UI Bug</option>
            <option value="Logic Bug">Logic Bug</option>
            <option value="Performance Bug">Performance Bug</option>
        </select>
        <button type="submit">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
    </form>
    {% endif %}
    {% elif not session.user_id %}
    <p><a href="/login">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ö‡∏±‡πä‡∏Å</p>
    {% endif %}

    <hr>

    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö developer ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô) -->
    {% if session.user_role == 'developer' %}
    {% if bug.verified %}
    <h2>‚úÖ ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</h2>
    <p>‡∏ö‡∏±‡πä‡∏Å‡∏ô‡∏µ‡πâ: <strong>{{ bug.verification_result }}</strong></p>
    {% else %}
    <h2>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ö‡∏±‡πä‡∏Å</h2>
    <form method="POST" action="/bug/{{ bug.id }}/verify">
        <label>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:</label>
        <select name="verification_result" required>
            <option value="fixed">Fixed (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß)</option>
            <option value="won't fix">Won't Fix (‡πÑ‡∏°‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)</option>
        </select>
        <button type="submit">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</button>
    </form>
    {% endif %}
    {% endif %}

    <hr>

    <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î -->
    <h2>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ({{ reports|length }})</h2>
    {% if reports %}
    <table border="1">
        <tr>
            <th>‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</th>
            <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
        </tr>
        {% for r in reports %}
        <tr>
            <td>{{ r.user.name }}</td>
            <td>{{ r.report_type }}</td>
            <td>{{ r.report_date.strftime('%Y-%m-%d %H:%M') }}</td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</p>
    {% endif %}
</body>

</html>